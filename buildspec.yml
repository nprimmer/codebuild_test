version: 0.2

phases:
  install:
    commands:
      - apt-get update -y
      - apt-get install apt-transport-https -y && apt-get update
      - apt-get install ca-certificates -y && apt-get update
      - apt-get install curl gnupg lsb-release -y
      - curl -fsSL https://download.docker.com/linux/ubuntu/gpg | gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg
      - echo "" > /etc/apt/sources.list.d/docker.list
      - echo "deb [arch=amd64 signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu" > /etc/apt/soruces.list.d/docker.list
      - echo "$(lsb_release -cs) stable" > /etc/apt/sources.list.d/docker.list
      - apt-get update -y
      - apt-get install docker-ce docker-ce-cli containerd.io -y
  build:
    commands:
      - docker build -t image_python -f test_files/python .
      - docker build -t image_openjdk -f test_files/openjdk .
